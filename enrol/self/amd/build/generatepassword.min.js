define ("enrol_self/generatepassword",["jquery","core/ajax","core/templates","core_form/passwordunmask"],function(a,b,c,d){var e=function(b,e){this.wrapperSelector="[data-passwordunmask=\"wrapper\"]";this.wrapper=a(this.wrapperSelector);this.inputFieldId=this.wrapper.attr("data-passwordunmaskid");this.passwordUnMask=new d(this.inputFieldId);var f=document.querySelectorAll("[data-passwordunmask=\"instructions\"]");c.render("enrol_self/element-generatepassword",{element:{id:b,context:e}}).then(function(b,d){a(f).before(b);c.runTemplateJS(d)}).fail();this.wrapper.on("click keypress","[data-passwordunmask=\"generate\"]",a.proxy(function(a){if("keypress"===a.type&&13!==a.keyCode){return}a.stopImmediatePropagation();a.preventDefault();var b=a.currentTarget.getAttribute("data-generate"),c=a.currentTarget.getAttribute("data-context");if("undefined"===b||"undefined"===c){return}var d=this.passwordUnMask;this.generate(b,c).then(function(a){if(0===a.warnings.length){d.inputField.val(a.key);d.setDisplayValue()}return!0}).fail()},this))};e.prototype.generate=function(a,c){var d=b.call([{methodname:"enrol_self_generate_key",args:{id:a,ctx:c}}]);return d[0]};return{init:function init(a,b){return new e(a,b)}}});
//# sourceMappingURL=generatepassword.min.js.map
